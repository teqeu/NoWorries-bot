# .github/workflows/discord-embed-notify.yml
name: Discord Embed Push Notification

on:
  push:
    branches: [ main ]

jobs:
  notify-discord:
    runs-on: ubuntu-latest
    steps:
      - name: Send Discord Embed
        uses: tsickert/discord-webhook@v7.0.0
        with:
          webhook-url: ${{ secrets.DISCORD_WEBHOOK }}
          raw-data: |
            {
              "embeds": [
                {
                  "title": "New Push to ${{ github.repository }}",
                  "url": "${{ github.event.head_commit.url }}",
                  "color": 5814783,
                  "author": {
                    "name": "${{ github.actor }}",
                    "url": "https://github.com/${{ github.actor }}"
                  },
                  "fields": [
                    {
                      "name": "Commit Message",
                      "value": "${{ github.event.head_commit.message }}",
                      "inline": false
                    },
                    {
                      "name": "Branch",
                      "value": "${{ github.ref }}",
                      "inline": true
                    }
                  ],
                  "timestamp": "${{ github.event.head_commit.timestamp }}"
                }
              ]
            }
